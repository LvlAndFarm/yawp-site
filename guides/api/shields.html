<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>YAWP! Framework</title>

    <!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
    <link href="/assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/assets/css/freelancer.css" rel="stylesheet">
    <link href="/assets/css/yawp.css" rel="stylesheet">
    <link href="/assets/css/github-ribbon.css" rel="stylesheet">
    <link href="/assets/css/guides.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- code formating -->
    <script src="http://cdn.jsdelivr.net/highlight.js/8.9.1/highlight.min.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="http://cdn.jsdelivr.net/highlight.js/8.9.1/styles/atelier-cave.light.min.css">


</head>

<body id="page-top" class="index">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>                
                
                    <a class="navbar-brand" href="/">YAWP!</a>
                
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="main-navbar collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <!-- <li class="page-scroll">
                        <a href="#page-top">Home</a>
                    </li> -->
                
                    <li class="page-scroll">
                        <a href="/#portfolio">Features</a>
                    </li>
                    <li class="page-scroll">
                        <a href="/#kickstart">Kickstart</a>
                    </li>
                    <li class="page-scroll active">
                        <a href="/guides">Guides</a>
                    </li>
                    <li class="page-scroll">
                        <a href="/#community">Community</a>
                    </li>                
                
                   
                    <li class="page-scroll">
                        <a href="http://github.com/feroult/yawp" target="_blank">GITHUB&nbsp;&nbsp;<i class="fa fa-github" style="font-size: 1.2em;"></i></a>
                    </li>                    
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <div class="container">
    <div id="accordion" class="panel-group">
        <div class="sidebar">
            <div class="panel panel-default">
                <a data-toggle="collapse" href="#getting-started">
                    <div class="panel-heading">
                        <h4 class="panel-title">Getting Started</h4>
                    </div>
                </a>

                <div id="getting-started" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <ul>
                            <a href="/guides/getting-started/installing-yawp">
                                <li class="getting-started_installing-yawp">
                                    Installing YAWP!
                                </li>
                            </a>
                            <a href="/guides/getting-started/your-first-api">
                                <li class="getting-started_your-first-api">
                                    Your first API
                                </li>
                            </a>
                            <a href="/guides/getting-started/core-concepts">
                                <li class="getting-started_core-concepts">
                                    Core concepts
                                </li>
                            </a>
                            <a href="/guides/getting-started/supported-platforms">
                                <li class="getting-started_supported-platforms">
                                    Supported platforms
                                </li>
                            </a>                            
                        </ul>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <a data-toggle="collapse" href="#tutorials">
                    <div class="panel-heading">
                        <h4 class="panel-title">Tutorials</h4>
                    </div>
                </a>

                <div id="tutorials" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <ul>
                            <a href="/guides/tutorials/todo-list-app">
                                <li class="tutorials_todo-list-app">
                                    To-Do List App
                                </li>
                            </a>      
                            <a href="/guides/tutorials/scaffolding">
                                <li class="tutorials_scaffolding">
                                    Scaffolding
                                </li>
                            </a>                                                        
                            <li>
                                <a href="todolist">The Javascript client</a>
                            </li>
                            <li>
                                <a href="todolist">Testing your APIs</a>
                            </li>
                            <li>
                                <a href="todolist">Relationships</a>
                            </li>                            
                            <li>
                                <a href="todolist">Working with ancestors</a>
                            </li>                              
                            <li>
                                <a href="todolist">How to use transactions</a>
                            </li>                            
                        </ul>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
                <a data-toggle="collapse" href="#api">
                    <div class="panel-heading">
                        <h4 class="panel-title">API</h4>
                    </div>
                </a>

                <div id="api" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <ul>
                            <a href="/guides/api/models">
                                <li class="api_models">
                                    Models
                                </li>
                            </a>      
                            <li>
                                <a href="kickstart">Repository Actions</a>
                            </li>
                            <li>
                                <a href="todolist">Custom Actions</a>
                            </li>
                            <li>
                                <a href="todolist">Query</a>
                            </li>
                            <li>
                                <a href="todolist">Transformers</a>
                            </li>
                            <a href="/guides/api/shields">
                                <li class="api_shields">
                                    Shields
                                </li>
                            </a>    
                            <li>
                                <a href="todolist">Hooks</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="guide">
        <h1 id="shields">Shields</h1>

<p>With Shields it is possible to provide security to your endoint APIs. It works like a firewall 
white list where you can specify what is allowed. To create a simple Shield, just extend
the Shield class for your endpoint:</p>

<pre><code class="language-java">public class PersonShield extends Shield&lt;Person&gt; {

    (...)
</code></pre>

<p>Since this Shield works like a white list, by simply creating this class, all the endpoint exposed 
APIs get instantly blocked and they will return <strong>404 Not Found</strong> in production.</p>

<h3 id="the-allow-method">The Allow Method</h3>

<p>Now, you can specify which routes you want to allow based on some business rules. You can do 
this by overriding the methods of the Shield base class and then calling the <strong>allow()</strong> or 
<strong>allow(boolean)</strong> method based on your security rules.</p>

<h3 id="repository-actions">Repository Actions</h3>

<p>To allow only the show repository action of the person’s model to be accessed by everyone, you can add this method to 
your Shield:</p>

<pre><code class="language-java">@Override
public void show(IdRef&lt;Person&gt; id) {
    allow();
}
</code></pre>

<p>Now, you may want to provide access to the destroy repository action only if the current logged user 
is the creator of a person’s instance:</p>

<pre><code class="language-java">@Override
public void destroy(IdRef&lt;Person&gt; id) {
    Person person id.fetch();
    allow(person.getCreatorId(Session.getLoggedUserId());
}
</code></pre>

<p>The name of the method being the repository action you are overriding:</p>

<pre><code class="language-java">public void index(IdRef&lt;?&gt; parentId)

public void show(IdRef&lt;T&gt; id)

public void create(List&lt;T&gt; objects)

public void update(IdRef&lt;T&gt; id, T object)

public void destroy(IdRef&lt;T&gt; id)
</code></pre>

<h3 id="custom-actions">Custom Actions</h3>

<p><em>TODO</em></p>

<h3 id="special-rules">Special Rules</h3>

<p>For convenience shields may override two special methods, they are:</p>

<pre><code class="language-java">public void always() {
   // for every route
}    

public void defaults() {
   // for route without a more specific shield rule.
} 
</code></pre>

<h3 id="shield-where-clause">Shield Where Clause</h3>

<p>Shields can also filter the data a given user can access (read or write). For instance, if the 
current user can interact only with people he has created, the shield would be:</p>

<pre><code class="language-java">@Override
public void always() {
    allow().where("creatorId", "=", Session.getLoggedUserId());
}
</code></pre>

<h3 id="shield-faades">Shield Façades</h3>

<p>Finally, Shields have a façade API. That means you can specify which attributes of your model a user can read or write. To do this, create a java interface that your model implements. Inside this interface specify what setters and getters will be allowed:</p>

<pre><code class="language-java">@Endpoint(path = "/people")
public class Person implements NameFacade {

    (...)

public interface NameFacade {

    public String getName();
    
    public void setName(String name);
    
    (...)
</code></pre>

<p>Now it is possible to wire up your façade:</p>

<pre><code class="language-java">@Override
public void always() {
    allow().where("creatorId", "=", Session.getLoggedUserId()).facade(NameFacade.class);
}
</code></pre>

    </div>
</div>

    <!-- Footer -->
    <footer class="text-center">
        <div class="footer-above">
            <div class="container">
                <div class="row">
                    <div class="footer-col col-md-4 col-md-offset-4">
                        <ul class="list-inline">
                            <li>
                                <a href="http://github.com/feroult/yawp" target="_blank" class="btn-social btn-outline"><i class="fa fa-fw fa-github"></i></a>
                            </li>
                            <li>
                                <a href="https://twitter.com/yawpio" target="_blank" class="btn-social btn-outline"><i class="fa fa-fw fa-twitter"></i></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <strong>YAWP!</strong> is released under the <a href="http://opensource.org/licenses/mit-license.php" target="_blank">MIT license</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="/assets/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/assets/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="http://cdn.jsdelivr.net/jquery.easing/1.3/jquery.easing.1.3.min.js"></script>
    <script src="/assets/js/classie.js"></script>
    <script src="/assets/js/cbpAnimatedHeader.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="/assets/js/jqBootstrapValidation.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="/assets/js/freelancer.js"></script>

    <!-- code formatter -->
    <script>hljs.initHighlightingOnLoad();</script>
    
    <script src="/assets/js/guides.js"></script>


</body>


</html>
